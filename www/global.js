"use strict";var watchSettings=angular.module("watchSettings",["ngRoute","ngAnimate","firebase","global","home","dashboard","edit"]);watchSettings.config(["$routeProvider",function(n){n.when("/",{templateUrl:"home/home.html",controller:"HomeCtrl"}).when("/log-in",{templateUrl:"home/log-in.html",controller:"HomeCtrl"}).when("/sign-up",{templateUrl:"home/sign-up.html",controller:"HomeCtrl"}).when("/dashboard",{templateUrl:"dashboard/dashboard.html",controller:"DashboardCtrl"}).when("/edit/:appId",{templateUrl:"edit/edit.html",controller:"EditCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("dashboard",[]).controller("DashboardCtrl",["$scope","App","User",function(n,e,o){n.apps=e.getAll(),n.user=o.findByUid("simplelogin:30")}]),angular.module("edit",[]).controller("EditCtrl",["$scope","App","$routeParams",function(n,e,o){n.app=e.findById(o.appId),n.imageOptions=["images/combo-lock.svg","images/globe.svg","images/gear.svg","images/keyhole.svg","images/locked.svg","images/cloud.svg"],n.colorOptions=["ef4121","3498DB","C0392B","8E44AD","2C3E50"],n.changeImage=function(e){n.landing.image=e},n.changeColor=function(e){n.landing.color=e},n.app.$on("loaded",function(){n.name=n.app.name,n.landing=n.app.configuration.landing})}]),angular.module("global").factory("App",["$firebase","Auth","User","$rootScope",function(n){var e=new Firebase("https://watch-settings.firebaseio.com/apps"),o=n(e),i={getAll:function(){return o},findById:function(n){return n?o.$child(n):void 0}};return i}]),angular.module("global",[]).factory("Auth",["$firebaseSimpleLogin","$rootScope",function(n,e){var o=new Firebase("https://watch-settings.firebaseio.com/"),i=n(o),t={register:function(n){return i.$createUser(n.email,n.password)},signedIn:function(){return null!==i.user},login:function(n){return i.$login("password",n)},githubLogin:function(){return i.$login("github")},logout:function(){i.$logout()}};return e.signedIn=function(){return t.signedIn()},t}]),angular.module("global").factory("User",["$firebase","Auth","$rootScope",function(n,e,o){function i(n){o.currentUser=l.findByUid(n)}var t=new Firebase("https://watch-settings.firebaseio.com/users"),r=n(t),l={create:function(n){r[n.uid]={id:n.id,uid:n.uid,provider:n.provider,email:n.email},r.$save(n.uid).then(function(){i(n.uid)})},createFacebook:function(n){r[n.uid]={id:n.id,uid:n.uid,provider:n.provider,email:n.thirdPartyUserData.email},r.$save(n.uid).then(function(){i(n.uid)})},findByUid:function(n){return n?r.$child(n):void 0},getCurrent:function(){return o.currentUser},signedIn:function(){return void 0!==o.currentUser}};return o.$on("$firebaseSimpleLogin:login",function(n,e){i(e.uid)}),o.$on("$firebaseSimpleLogin:logout",function(){delete o.currentUser}),l}]),angular.module("home",[]).controller("HomeCtrl",["$scope","Auth","User","$location",function(n,e,o,i){n.signedIn=o.signedIn(),n.$on("$firebaseSimpleLogin:login",function(){i.path("/dashboard")}),n.githubLogin=function(){e.githubLogin().then(function(n){console.log(n),o.findByUid(n.uid).uid||o.createFacebook(n)},function(n){console.log(n)})},n.signup=function(){e.login(n.user).then(function(){},function(i){(i="INVALID_EMAIL")?e.register(n.user).then(function(e){o.create(e),n.login()},function(){}):(i="INVALID_PASSWORD")||console.log(i)})},n.login=function(){e.login(n.user).then(function(){},function(n){(n="INVALID_EMAIL")||(n="INVALID_PASSWORD")||console.log(n)})},n.signOut=function(){e.logout()}}]);